<app-bread-crump [baseName]="name" [baseSubtext]="subText"></app-bread-crump>
<div class="form-container">
  <form [formGroup]="rForm">
    <h1 class="form-heading">Fill in the patient information</h1>

    <div class="col-1-of-3 form-content">
      <mat-form-field class="form-group" appearance="outline">
        <mat-label>First Name</mat-label>
        <input matInput placeholder="First Name" formControlName="FirstName" MatFormFieldControl type="text" required>
        <mat-icon matSuffix>person</mat-icon>
        <mat-error *ngIf="!rForm.controls['FirstName'].valid && rForm.controls['FirstName'].touched">a valid First Name
          is
          required</mat-error>
      </mat-form-field>

      <mat-form-field class="form-group" appearance="outline">
        <mat-label>Enter Surname</mat-label>
        <input matInput placeholder="Surname" formControlName="Surname" MatFormFieldControl type="text" required>
        <mat-icon matSuffix>person</mat-icon>
        <mat-error *ngIf="!rForm.controls['Surname'].valid && rForm.controls['Surname'].touched">your Surname is
          required</mat-error>
      </mat-form-field>
      <div class="col-1-of-2">

        <mat-form-field class="form-group" appearance="outline">
          <mat-label>Date of birth</mat-label>
          <input matInput placeholder="DOB" formControlName="DOB" (ngModelChange)="calculateAge(rForm.value)"
            MatFormFieldControl [matDatepicker]="picker" required>
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker startView="year" [startAt]="dobDate"></mat-datepicker>
          <mat-error *ngIf="!rForm.controls['DOB'].valid && rForm.controls['DOB'].touched">a valid date of birth is
            required</mat-error>
        </mat-form-field>

        <mat-form-field class="form-group" appearance="outline">
          <mat-label>Age</mat-label>
          <input matInput placeholder="Age" [ngModel]="updatedAge"  [disabled]="true" formControlName="Age" MatFormFieldControl maxlength="4"
            type="text" required>
          <mat-icon matSuffix>account_circle</mat-icon>
        </mat-form-field>
      </div>

      <mat-form-field class="form-group" appearance="outline">
        <mat-label>Enter contact number</mat-label>
        <input matInput placeholder="ContactNumber" formControlName="ContactNumber" maxlength="13" MatFormFieldControl
          type="text" required>
        <mat-icon matSuffix>stay_primary_portrait</mat-icon>
        <mat-error *ngIf="!rForm.controls['ContactNumber'].valid && rForm.controls['ContactNumber'].touched">
          a valid ContactNumber (10 Characters long) is required</mat-error>
      </mat-form-field>

      <mat-form-field class="form-group" appearance="outline">
        <mat-label>Email address</mat-label>
        <input matInput placeholder="Email" formControlName="Email" MatFormFieldControl type="email" required>
        <mat-icon matSuffix>mail_outline</mat-icon>
        <mat-error *ngIf="!rForm.controls['Email'].valid && rForm.controls['Email'].touched">a valid email address is
          required</mat-error>
      </mat-form-field>

      <mat-form-field class="form-group" appearance="outline">
        <mat-label>Sex</mat-label>
        <input matInput placeholder="Sex" formControlName="Sex" MatFormFieldControl maxlength="4" type="text" >
      </mat-form-field>

      <mat-form-field class="form-group" appearance="outline">
        <mat-label>Enter Address</mat-label>
        <input matInput placeholder="Address" formControlName="Address" MatFormFieldControl type="text" >
        <mat-icon matSuffix>home</mat-icon>
      </mat-form-field>


      <mat-form-field class="form-group" appearance="outline">
        <mat-label>Enter City</mat-label>
        <input matInput placeholder="City" formControlName="City" MatFormFieldControl type="text">
        <mat-icon matSuffix>location_on</mat-icon>
      </mat-form-field>


      <mat-form-field class="form-group" appearance="outline">
        <mat-label>Enter Province</mat-label>
        <input matInput placeholder="Province" formControlName="Province" MatFormFieldControl type="text">
        <mat-icon matSuffix>location_on</mat-icon>
      </mat-form-field>

      <mat-form-field class="form-group" appearance="outline">
        <mat-label>Enter Post Code</mat-label>
        <input matInput placeholder="PostCode" formControlName="PostCode"
        MatFormFieldControl type="text" maxLength="5">
        <mat-icon matSuffix>pin_drop
        </mat-icon>
      </mat-form-field>

      <mat-form-field class="form-group" appearance="outline">
        <mat-label>Enter Parent FirstName</mat-label>
        <input matInput placeholder="Parent FirstName" formControlName="ParentFirstName"
        MatFormFieldControl type="text" >
        <mat-icon matSuffix>people_alt

        </mat-icon>
      </mat-form-field>
      <mat-form-field class="form-group" appearance="outline">
        <mat-label>Enter Parent Surname</mat-label>
        <input matInput placeholder="Parent Surname" formControlName="ParentSurname"
        MatFormFieldControl type="text">
        <mat-icon matSuffix>people_alt
        </mat-icon>
      </mat-form-field>


    </div>

    <div class="cta">
      <button mat-button (click)="onSubmit(rForm.value)" [disabled]="!rForm.valid">Take a test
      </button>
      <a routerLink="/sign-up" class="cta">Create a new account</a>
    </div>
    <div class="error" *ngIf="error">
      <h1>{{error}}</h1>
    </div>
  </form>
</div>
